---
sidebar: sidebar 
permalink: use-codebox.html 
keywords: codebox, automation, cloudformation, rest api, aws cli, permissions 
summary: Puede utilizar Codebox para generar el código necesario para ejecutar cualquier operación compatible con NetApp Workload Factory. 
---
= Utilice Codebox para la automatización en NetApp Workload Factory
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Puede utilizar Codebox para generar el código necesario para ejecutar cualquier operación compatible con NetApp Workload Factory.  Puede generar código que se pueda consumir y ejecutar mediante las API REST de Workload Factory, AWS CLI y AWS CloudFormation.

Codebox está alineado con los modos de operación de Workload Factory (_básico_, _solo lectura_ y _lectura/escritura_) al completar los datos apropiados en el código en función de los permisos de AWS proporcionados en la cuenta de Workload Factory para cada usuario.  El código se puede utilizar como una plantilla donde puedes completar la información faltante (por ejemplo, credenciales) o personalizar ciertos datos antes de ejecutar el código.



== Cómo usar CodeBox

A medida que ingresa valores en los asistentes de interfaz de usuario de Workload Factory, puede ver la actualización de datos en Codebox a medida que completa cada campo.  Cuando complete el asistente, pero antes de seleccionar el botón *Crear* en la parte inferior de la página, seleccioneimage:button-copy-codebox.png["el botón copiar"] copiar en Codebox para capturar el código necesario para construir su configuración.  Por ejemplo, esta captura de pantalla de la creación de un nuevo Microsoft SQL Server muestra las entradas del asistente para VPC y zonas de disponibilidad y las entradas equivalentes en Codebox para una implementación de API REST.

image:screenshot-codebox-example1.png["Una captura de pantalla que muestra cómo crear un Microsoft SQL Server en la interfaz de usuario y las entradas correspondientes para VPC y zonas de disponibilidad en CodeBox."]

Con algunos formatos de código también puedes seleccionar el botón de descarga para guardar el código en un archivo que puedes llevar a otro sistema.  Si es necesario, puede editar el código después de descargarlo para poder adaptarlo a otras cuentas de AWS.



== Utilice el código CloudFormation de CodeBox

Puede copiar el código de CloudFormation generado desde Codebox y luego iniciar la pila de Amazon Web Services CloudFormation en su cuenta de AWS.  CloudFormation realizará las acciones que definió en la interfaz de usuario de Workload Factory.

Los pasos para usar el código de CloudFormation pueden ser diferentes dependiendo de si está implementando un sistema de archivos FSx para ONTAP , creando credenciales de cuenta o realizando otras acciones de Workload Factory.

Tenga en cuenta que el código dentro de un archivo YAML generado por CloudFormation expira después de 7 días por razones de seguridad.

.Antes de empezar
* Necesitarás disponer de credenciales para iniciar sesión en tu cuenta de AWS.
* Necesitarás tener los siguientes permisos de usuario para usar una pila de CloudFormation:
+
[%collapsible]
====
[source, json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "cloudformation:CreateStack",
                "cloudformation:UpdateStack",
                "cloudformation:DeleteStack",
                "cloudformation:DescribeStacks",
                "cloudformation:DescribeStackEvents",
                "cloudformation:DescribeChangeSet",
                "cloudformation:ExecuteChangeSet",
                "cloudformation:ListStacks",
                "cloudformation:ListStackResources",
                "cloudformation:GetTemplate",
                "cloudformation:ValidateTemplate",
                "lambda:InvokeFunction",
                "iam:PassRole",
                "iam:CreateRole",
                "iam:UpdateAssumeRolePolicy",
                "iam:AttachRolePolicy",
                "iam:CreateServiceLinkedRole"
            ],
            "Resource": "*"
        }
    ]
}
----
====


.Pasos
. Después de utilizar la consola Workload Factory para definir la operación que desea realizar, copie el código en Codebox.
. Seleccione *Redirigir a CloudFormation* y se mostrará la página Redirigir a CloudFormation.
. Abra otra ventana del explorador e inicie sesión en la consola de administración de AWS.
. Seleccione *Continuar* en la página Redirigir a CloudFormation.
. Inicie sesión en la cuenta de AWS donde se debe ejecutar el código.
. En la página Quick create stack, en Capacidades, seleccione *Acepto que AWS CloudFormation podría ...*.
. Seleccione *Crear pila*.
. Supervise el progreso desde AWS o desde Workload Factory.




== Utilice el código de API REST de CodeBox

Puede utilizar las API REST de Workload Factory generadas desde Codebox para implementar y administrar sus sistemas de archivos FSx para ONTAP y otros recursos de AWS.

Puede ejecutar las API desde cualquier host que admita cURL y que tenga conectividad a Internet.

Tenga en cuenta que los tokens de autenticación están ocultos en CodeBox, pero se rellenan al copiar y pegar la llamada API.

.Pasos
. Después de haber utilizado la consola Workload Factory para definir la operación que desea realizar, copie el código API en Codebox.
. Pegue el código y ejecútelo en su sistema host.




== Utilice el código de la CLI de AWS de CodeBox

Puede usar la interfaz de línea de comandos de Amazon Web Services generada desde CodeBox para implementar y administrar sus sistemas de archivos FSx para ONTAP y otros recursos de AWS.

.Pasos
. Después de haber utilizado la consola de Workload Factory para definir la operación que desea realizar, copie la AWS CLI en Codebox.
. Abra otra ventana del explorador e inicie sesión en la consola de administración de AWS.
. Pega el código y ejecútalo.




== Utilice Terraform de CodeBox

Puedes utilizar Terraform para implementar y gestionar tus sistemas de archivos FSx para ONTAP y otros recursos de AWS.

.Antes de empezar
* Necesitarás un sistema donde Terraform esté instalado (Windows/Mac/Linux).
* Necesitarás disponer de credenciales para iniciar sesión en tu cuenta de AWS.


.Pasos
. Después de haber utilizado la consola Workload Factory para definir la operación que desea realizar, descargue el código Terraform desde Codebox.
. Copie el archivo de script descargado en el sistema donde está instalado Terraform.
. Extraiga el archivo zip y siga los pasos del archivo README.md.

